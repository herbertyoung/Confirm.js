!function(a,b){"use strict";function c(a){var b=f.createElement("div");return b.setAttribute("class",a),f.body.appendChild(b),"confirm"===a&&d(b),b}function d(a){var b=c("confirm-header"),d=c("confirm-main"),e=c("confirm-footer"),g=c("close rounded"),h=f.createElement("p"),i=c("button"),j=c("button");g.dataset.action="close",b.appendChild(g),d.appendChild(h),i.textContent="确定",i.dataset.action="confirm",j.textContent="取消",j.dataset.action="close",e.appendChild(i),e.appendChild(j),a.appendChild(b),a.appendChild(d),a.appendChild(e)}function e(){return this instanceof e?this:void 0}var f=a.document;e.prototype={init:function(){return this.mask=this.mask||c("mask"),this.confirm=this.confirm||c("confirm"),this.initEvents.call(this),this},show:function(a,b){this.confirm.querySelector(".confirm-main p").innerHTML=a||"",null===this.confirmHandler&&(this.confirmHandler=b&&"function"==typeof b?b:null),this.confirm.style.display=this.mask.style.display="block"},hide:function(){var b=this;this.confirm.style.display=this.mask.style.display="none",this.confirmHandler&&setTimeout(function(){b.confirmHandler=null},500),a.event&&(a.event.stopPropagation(),a.event.preventDefault())},initEvents:function(){this.hideHandler=this.hideHandler||this.hide.bind(this),this.confirmEventProxyHandler=this.confirmEventProxyHandler||this.confirmEventProxy.bind(this),this.confirmHandler=null,this.mask.addEventListener("touchend",this.hideHandler,!1),this.confirm.addEventListener("touchend",this.confirmEventProxyHandler,!1)},removeEvents:function(){this.mask.removeEventListener("touchend",this.hideHandler,!1),this.confirm.removeEventListener("touchend",this.confirmEventProxyHandler,!1),this.hideHandler=this.confirmHandler=null},reset:function(){this.removeEvents.call(this),this.confirm.style.display=this.mask.style.display="none"},confirmEventProxy:function(){var b=a.event.target;switch(b.dataset.action){case"close":this.hide.call(this);break;case"confirm":this.hide.call(this),this.confirmHandler&&this.confirmHandler.call(b)}}};var g=(new e).init();a.showConfirm=g.show.bind(g)}(window);